FROM alpine:latest

# Install dnsmasq
RUN apk --no-cache add dnsmasq

# Copy configuration
COPY config/services/dnsmasq.conf /etc/dnsmasq.conf

# Create directory for additional hosts
RUN mkdir -p /etc/dnsmasq.d

# Expose DNS port
EXPOSE 53/tcp 53/udp

# Run dnsmasq in foreground
CMD ["dnsmasq", "-k", "--log-facility=-"]